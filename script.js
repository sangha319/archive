// =========================== // ë‚ ì§œë³„ POP ë©”ì‹œì§€ ì¶œë ¥ (date-view.html) // =========================== if (selectedDate && document.getElementById('messages')) { fetch("messages.json?v=" + Date.now()) .then(res => res.json()) .then(data => { const msgBox = document.getElementById("messages"); // ì„ íƒëœ ë‚ ì§œ ë©”ì‹œì§€ë§Œ í•„í„° const filtered = data.filter(msg => msg.date === selectedDate); let prevMsg = null; filtered.forEach(msg => { const block = document.createElement("div"); block.className = "message-block"; const isContinuous = prevMsg && prevMsg.time === msg.time; // ğŸ”¥ ê°™ì€ ì‹œê°„ â†’ ì—°ì† ë©”ì‹œì§€ // ================================ // 1) ìƒˆë¡œìš´ ì‹œê°„ì˜ ì²« ë©”ì‹œì§€ // ================================ if (!isContinuous) { block.innerHTML = <img class="avatar" src="SANGHA.jpg"> <div class="msg-right"> <div class="sender-line"> <span class="name">SANGHA</span> <span class="time">${msg.time}</span> </div> <div class="bubble">${msg.text.replace(/\n/g, "<br>")}</div> </div> ; } // ================================ // 2) ì—°ì† ë©”ì‹œì§€ (í”„ì‚¬/ì´ë¦„/ì‹œê°„ ì œê±°) // ================================ else { block.innerHTML = <div class="msg-right continuous"> <div class="bubble">${msg.text.replace(/\n/g, "<br>")}</div> </div> ; } msgBox.appendChild(block); prevMsg = msg; // ë‹¤ìŒ ë©”ì‹œì§€ ë¹„êµìš© ì €ì¥ }); }); }
