<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë‚ ì§œë³„ ë³´ê¸°</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <h1 class="title">by date</h1>

  <div id="date-grid" class="date-grid"></div>

  <script>
    fetch('messages.json')
      .then(res => res.json())
      .then(data => {
        const grid = document.getElementById('date-grid');

        // ë‚ ì§œ ë¦¬ìŠ¤íŠ¸ ë§Œë“¤ê¸° (ì¤‘ë³µ ì œê±° + ìµœì‹  ìˆœ ì •ë ¬)
        const dates = [...new Set(data.map(msg => msg.date))].sort().reverse();

        // YYYY-MM-DD â†’ 240801 ë³€í™˜ í•¨ìˆ˜
        function shortDate(dateStr) {
          return dateStr.replace(/-/g, '').slice(2); 
          // â†’ 2024-08-01 â†’ 20240801 â†’ 240801
        }

        dates.forEach(date => {
          const card = document.createElement('div');
          card.className = 'date-card';

          // ğŸ”¥ ë‚ ì§œ ì¹´ë“œ ìˆ«ì ì¶œë ¥
          card.innerHTML = `
            <div class="date-text">${shortDate(date)}</div>
          `;

          // ğŸ”¥ ë‚ ì§œ í´ë¦­ â†’ date-view.html?date=YYYY-MM-DD
          card.onclick = () => {
            window.location.href = `date-view.html?date=${date}`;
          };

          grid.appendChild(card);
        });
      });
  </script>

</body>
</html>
