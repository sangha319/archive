<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>날짜별 보기</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <h1 class="title">by date</h1>

  <div id="date-grid" class="date-grid"></div>

  <script>
    fetch('messages.json')
      .then(res => res.json())
      .then(data => {
        const grid = document.getElementById('date-grid');

        // 날짜 리스트 만들기 (중복 제거 + 정렬)
        const dates = [...new Set(data.map(msg => msg.date))].sort().reverse();

        dates.forEach(date => {

          // 화면에 보여줄 숫자 형태 변환 → 240801
          const compact = date.replace(/-/g, "").slice(2);

          const card = document.createElement('div');
          card.className = 'date-card';

          card.innerHTML = `
            <div class="date-text">${compact}</div>
          `;

          // 클릭하면 원래 날짜 형식(YYYY-MM-DD)로 이동
          card.onclick = () => {
            window.location.href = `date-view.html?date=${date}`;
          };

          grid.appendChild(card);
        });
      });
  </script>

</body>
</html>
